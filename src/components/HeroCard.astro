---
import { Image } from "astro:assets";
import { Icon } from "astro-icon/components";

interface Props {
    name: string;
    description: string;
    profileImage: ImageMetadata;
    defaultHoverColor?: string;
    socials: {
        platform: string;
        url: string;
        icon: string;
        color?:
            | "rosewater"
            | "flamingo"
            | "pink"
            | "mauve"
            | "red"
            | "maroon"
            | "peach"
            | "yellow"
            | "green"
            | "teal"
            | "sky"
            | "sapphire"
            | "blue"
            | "lavender";
    }[];
}

const {
    name,
    description,
    profileImage,
    socials,
    defaultHoverColor = "mauve",
} = Astro.props;
---

<section class="hero-card">
    <!-- 1. MOVED IMAGE TO TOP (Left on Desktop) -->
    <div class="image-wrapper">
        <div class="image-container">
            <Image
                src={profileImage}
                alt={name}
                width={512}
                height={512}
                class="profile-pic"
            />
        </div>
    </div>

    <!-- 2. CONTENT IS NOW SECOND (Right on Desktop) -->
    <div class="content">
        <h1>
            <span class="greeting">Hi, I'm</span>
            <span class="name">{name}</span>
        </h1>
        <p class="bio">{description}</p>

        <div class="social-links">
            {
                socials.map((social) => {
                    const colorName = social.color || defaultHoverColor;
                    const cssVar = `var(--ctp-${colorName})`;

                    return (
                        <a
                            href={social.url}
                            target="_blank"
                            rel="noopener noreferrer"
                            aria-label={social.platform}
                            class="icon-link"
                            style={{ "--hover-bg": cssVar }}
                        >
                            <Icon name={social.icon} class="icon" />
                        </a>
                    );
                })
            }
        </div>
    </div>
</section>

<style>
    /* 1. Layout & Container */
    .hero-card {
        display: flex;
        /* Mobile: Standard Stack (Image Top, Text Bottom) */
        flex-direction: column;
        gap: 1.5rem;
        align-items: center;
        /* Ensure the card itself is centered in the page */
        max-width: 800px;
        margin: 0 auto;
    }

    /* Desktop Layout */
    @media (min-width: 768px) {
        .hero-card {
            /* Desktop: Image Left, Text Right */
            flex-direction: row;

            /* Pack them close together, start from the center of the container */
            justify-content: center;

            align-items: center;
            text-align: left;

            /* 2. TIGHTER GAP: Reduced from 3rem to 2rem */
            gap: 2rem;
        }
    }

    /* 3. Typography & Colors */
    .content {
        /* Remove flex: 1 to stop it from pushing away. Let it take only needed space. */
        display: flex;
        flex-direction: column;
        gap: 1rem;
        max-width: 500px;
        /* Center text on mobile */
        text-align: center;
    }

    /* Re-align text to left on desktop */
    @media (min-width: 768px) {
        .content {
            text-align: left;
        }
    }

    h1 {
        font-size: 2.5rem;
        font-weight: 800;
        line-height: 1.1;
        color: var(--ctp-text);
        margin: 0;
    }

    .greeting {
        color: var(--ctp-subtext0);
    }
    .name {
        color: var(--ctp-text);
    }
    .bio {
        line-height: 1.6;
        color: var(--ctp-text);
        font-size: 1rem;
    }

    /* Social Icons */
    .social-links {
        display: flex;
        gap: 1rem;
        margin-top: 0.5rem;
        justify-content: center; /* Center on mobile */
    }

    @media (min-width: 768px) {
        .social-links {
            justify-content: flex-start; /* Left on desktop */
        }
    }

    .icon-link {
        color: var(--ctp-overlay1);
        transition: all 0.2s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 0.5rem;
        border-radius: 8px;
        background-color: var(--ctp-surface0);
    }

    .icon-link:hover {
        color: var(--ctp-base);
        background-color: var(--hover-bg);
        transform: translateY(-2px);
    }

    .icon {
        width: 1.25rem;
        height: 1.25rem;
        color: currentColor;
    }

    /* Image Styles */
    .image-wrapper {
        flex-shrink: 0;
    }

    .image-container {
        width: 180px;
        height: 180px;
        border-radius: 50%;
        overflow: hidden;
        border: 4px solid var(--ctp-green);
        background-color: var(--ctp-yellow);
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    }

    .profile-pic {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    @media (min-width: 768px) {
        .image-container {
            width: 200px;
            height: 200px;
        }
    }
</style>
